#!/usr/bin/env python
# coding: utf-8
# vim: set filetype=python:
import tox
import yaml


ENVLIST = tox._config.parseconfig().envlist


CONFIG = {
    'language': 'python',
    'python': ['2.7'],
    'env': {
        'matrix': ['TOX_ENV=' + env for env in ENVLIST]
    },
    'install': [
        'make dev-env'
    ],
    'script': [
        'tox -e $TOX_ENV'
    ]
}


with open('.travis.yml', 'wb') as config_file:
    config_file.write(b'# DON\'T EDIT AUTOGENERATED BY .travis.yml.in\n')
    config_file.write(
        yaml.dump(CONFIG, default_flow_style=False, encoding='utf-8')
    )
